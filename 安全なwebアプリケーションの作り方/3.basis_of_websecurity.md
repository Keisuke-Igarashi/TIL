# **Webセキュリティの基礎**

## 3-1 HTTPとセッション管理

* レスポンス

    * ステータスライン

        HTTP/1.1 200 OK

        * ステータスコード

            |ステータスコード|概要|
            ----|----
            |1xx|処理が継続している|
            |2xx|正常終了|
            |3xx|リダイレクト|
            |4xx|クライアントエラー|
            |5xx|サーバーエラー|

        * レスポンスヘッダ

            * 改行のみの行が現れるまで続く
            * Content-Length：ボディのバイト数
            * Content-Type：MIMEタイプというリソースの種類を指定する。HTMLの場合は、text/htmlである。

            |MIMEタイプ|意味|
            ----|----
            |text/plain|テキスト|
            |text/html|HTML文書|
            |application/xml|XML文書|
            |text/css|CSS|
            |image/gif|GIF画像|
            |image/jpeg|JPEG画像|
            |image/png|PNG画像|
            |application/pdf|PDF文書|

* リクエスト

    * POSTメソッド

    * メッセージボディ

        * POSTメソッドによるリクエストメッセージにはボディという部分がある。レスポンスメッセージの場合同様、ヘッダとボディは空行で区切る。POSTにより送信される値に関するヘッダがContent-LengthとContent-Type。
        
            * Content-Length：ボディのバイト数
            * Content-Type：送信する値のMIMEタイプ。HTMLのform要素で指定することができる。指定がない場合は[application/x-www-from-urlencoded]となる「名前=値」の組を「＆」でつないだデータ形式で返すというしてい。名前と値はパーセントエンコードされる。

            * パーセントエンコーディング
                パーセントエンコーディングは対象の文字をバイト単位で「%xx」という形式であらわす。xxはバイトの16進数表記。パーセントエンコーディングの規約では、**スペースは%20となるが「application/x-www-form-urlencoded」の場合はスペースを特別扱いして「＋」に符号化することになっている。**「I'm a programmer」を符号化した場合は、「I%27m+a+programmer」となる。

            * Referer：リンク元のURLをあらわすヘッダ。

    * GETとPOSTの使い分け

        * 更新系の処理はPOST。GETは参照のみ
        * URLの長さには上限がある（ブラウザにより異なる)ため大量のデータを送る場合もPOST
        * 秘密情報を送る場合もPOSTを用いる

    * hiddenパラメータは書き換えできる

    * hiddenパラメータのメリット
    
        hiddenは利用者自身からは書き換えできるものの、情報漏洩や第三者からの書き換えに関しては堅牢。hiddenパラメータと比較する対象には、クッキーやセッション変数がある。クッキーやセッション変数の欠点として、セッションＩＤの固定化攻撃に弱いことがある。利用者自身によっても書き換えられては困る認証や認可に関する情報はセッション変数に保存すべきだが、それ以外の情報は、まずはhiddenパラメータに保存することを検討するとよい。
