# 脆弱性診断

## 1.診断前・準備

- 診断対象の確認  
　用途と重要性を理解し優先度付けを行う。  
　また診断機関と費用に応じて診断対象を選定する。  
- 依頼主との意識合わせ  
  - 利用ツール・診断項目などの説明  
    禁止・免責事項の説明  
  - ヒアリング
  - 作業環境の準備依頼
- 診断の見積
    - IPアドレス数・ホスト数・セグメント数・オンサイト/リモート・ポートスキャン範囲
- 診断準備
　人員確保や設備確保

## 2.環境設定・基本ポリシー作成

## 3.脆弱性の調査

## 4.レポーティングとリスク算出

## 5.診断実施後のアフターサポート


## レポーティング内容

- 診断環境
- 診断実施概要
- システム全体の評価
- 診断マシンの情報
- 脆弱性情報・対策方法

## アフターサポート

- 診断データの取り扱い（機密情報のため）
- 脆弱性修正後の再診断に関する取り決め

## Ping Sweep
1. ①シェルスクリプトを利用した方法
```bash
for i in {1..254}; do ping xxx.yyy.zzz.$i -c 1 -W | grep ttl | cut -d'' -f 4 | tr -d ':' >> ip_list.txt & done
```

2. fpingを利用した方法
```bash
fping -r 1 -g xxx.yyy.zzz.0/24 | grep alive > fping.txt
```

## 脆弱性スキャナとは

- 誤検知、過検知もありうる→複数の実施や手動検証を

- web脆弱性スキャナ

- プラットフォーム脆弱性スキャナ
    - OpenVAS
    - Nessus

## OpenVAS

webブラウザで立ち上げ
```
gvm-start
```

## レポートの書き方

以下盛り込む
- 対象
- 前提
- 件数
- 深刻度
- 対策の必要性
- 対策の方法
- 診断結果の信頼度


- PoC
脆弱性を利用するコードについては「脆弱性＋PoC」で検索すると出ることが多い。

