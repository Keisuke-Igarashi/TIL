# Vulnversity

* 造語??

## Task2 Reconnaissance

```bash
root@ip-10-10-224-215:~# nmap 10.10.117.227

Starting Nmap 7.60 ( https://nmap.org ) at 2022-05-30 02:39 BST
Nmap scan report for ip-10-10-117-227.eu-west-1.compute.internal (10.10.117.227)
Host is up (0.0011s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
3128/tcp open  squid-http
3333/tcp open  dec-notes
MAC Address: 02:F6:B3:82:B1:B7 (Unknown)
```

* What version of the squid proxy is running on the machine?
  * 3.5.12

```bash
root@ip-10-10-112-141:~# nmap -sV 10.10.216.75

Starting Nmap 7.60 ( https://nmap.org ) at 2022-06-01 15:05 BST
Nmap scan report for ip-10-10-216-75.eu-west-1.compute.internal (10.10.216.75)
Host is up (0.0011s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 3.0.3
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.7 (Ubuntu Linux; protocol 2.0)
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
3128/tcp open  http-proxy  Squid http proxy 3.5.12
3333/tcp open  http        Apache httpd 2.4.18 ((Ubuntu))
MAC Address: 02:D0:3E:70:83:B1 (Unknown)
Service Info: Host: VULNUNIVERSITY; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 23.83 seconds
```

* How many ports will nmap scan if the flag -p-400 was used?
  * 400

```bash
root@ip-10-10-112-141:~# nmap -p-400 10.10.216.75

Starting Nmap 7.60 ( https://nmap.org ) at 2022-06-01 15:08 BST
Nmap scan report for ip-10-10-216-75.eu-west-1.compute.internal (10.10.216.75)
Host is up (0.0011s latency).
Not shown: 397 closed ports
PORT    STATE SERVICE
21/tcp  open  ftp
22/tcp  open  ssh
139/tcp open  netbios-ssn
MAC Address: 02:D0:3E:70:83:B1 (Unknown)
```

* Using the nmap flag -n what will it not resolve?
  * dns

```bash
root@ip-10-10-112-141:~# nmap -n 10.10.216.75

Starting Nmap 7.60 ( https://nmap.org ) at 2022-06-01 15:10 BST
Nmap scan report for 10.10.216.75
Host is up (0.0015s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
3128/tcp open  squid-http
3333/tcp open  dec-notes
MAC Address: 02:D0:3E:70:83:B1 (Unknown)

Nmap done: 1 IP address (1 host up) scanned in 1.61 seconds
```

* What is the most likely operating system this machine is running?
  * ubuntu

```bash
root@ip-10-10-112-141:~# nmap -A 10.10.216.75

Starting Nmap 7.60 ( https://nmap.org ) at 2022-06-01 15:15 BST
Nmap scan report for ip-10-10-216-75.eu-west-1.compute.internal (10.10.216.75)
Host is up (0.00080s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 3.0.3
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.7 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 5a:4f:fc:b8:c8:76:1c:b5:85:1c:ac:b2:86:41:1c:5a (RSA)
|   256 ac:9d:ec:44:61:0c:28:85:00:88:e9:68:e9:d0:cb:3d (ECDSA)
|_  256 30:50:cb:70:5a:86:57:22:cb:52:d9:36:34:dc:a5:58 (EdDSA)
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
3128/tcp open  http-proxy  Squid http proxy 3.5.12
|_http-server-header: squid/3.5.12
|_http-title: ERROR: The requested URL could not be retrieved
3333/tcp open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Vuln University
MAC Address: 02:D0:3E:70:83:B1 (Unknown)
Device type: general purpose
Running: Linux 3.X
OS CPE: cpe:/o:linux:linux_kernel:3.13
OS details: Linux 3.13
Network Distance: 1 hop
Service Info: Host: VULNUNIVERSITY; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_nbstat: NetBIOS name: VULNUNIVERSITY, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: vulnuniversity
|   NetBIOS computer name: VULNUNIVERSITY\x00
|   Domain name: \x00
|   FQDN: vulnuniversity
|_  System time: 2022-06-01T10:16:05-04:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2022-06-01 15:16:05
|_  start_date: 1600-12-31 23:58:45

TRACEROUTE
HOP RTT     ADDRESS
1   0.80 ms ip-10-10-216-75.eu-west-1.compute.internal (10.10.216.75)

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 29.34 seconds
```

* What port is the web server running on?
  * 3333

## Task 3  Locating directories using GoBuster

Using a fast directory discovery tool called GoBuster you will 
locate a directory that you can use to upload a shell to.　　

* GoBuster
  * シェルをアップロードできるディレクトリを素早く見つけるツール
  * URIをBrute-forceする

* GitHubページ
  * 'https://github.com/OJ/gobuster'

* Go環境がないとインストールできない
  * バージョンが古くて簡易なインストールに対応していない

```bash
root@ip-10-10-112-141:~# sudo apt install golang-go
root@ip-10-10-112-141:~# go version
go version go1.10.4 linux/amd64
```

* (memo)めんどくさそうなのでopenvpnでmacから実施する

* macへのGO環境構築
  * 'https://zenn.dev/salvage0707/articles/go-settings-for-mac-2020-06'

  * インストール 

    ```mac
    brew install go
    keisukeigarashi@MacBook-Pro ~ % go version
    go version go1.18.2 darwin/arm64
    ```

  * 環境変数設定

    ```mac
    keisukeigarashi@MacBook-Pro ~ % go env GOPATH
    /Users/keisukeigarashi/go
    keisukeigarashi@MacBook-Pro ~ % export GOPATH=$(go env GOPATH)
    keisukeigarashi@MacBook-Pro ~ % export PATH=$PATH:$GOPATH:bin
    keisukeigarashi@MacBook-Pro ~ % source ~/.bashrc
    source: no such file or directory: /Users/keisukeigarashi/.bashrc
    keisukeigarashi@MacBook-Pro ~ % source ~/.bash_profile
    ```

